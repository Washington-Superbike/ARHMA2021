\hypertarget{_display_8ino}{}\doxysection{Display.\+ino File Reference}
\label{_display_8ino}\index{Display.ino@{Display.ino}}


The \mbox{\hyperlink{_display_8ino}{Display.\+ino}} file executes the Display task for the bike\textquotesingle{}s firmware. This calls on the variables that are initialized in \mbox{\hyperlink{_display_8h}{Display.\+h}} and then calls on various methods from the ILI9341\textquotesingle{}s adafruit display library to update the display. Updating the display includes comparing old and new data to ensure data has changed, erasing the previous data if it\textquotesingle{}s changed and writing in the new data.  


{\ttfamily \#include \char`\"{}Display.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Main.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Free\+RTOS\+\_\+\+TEENSY4.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_display_8ino_abbc2dd9c7d8fc4714a0379f70d919047}{display\+Task}} (void $\ast$\mbox{\hyperlink{_main_8h_aebb1e162e2ac30616875763e56823870}{display\+Task\+Wrap}})
\item 
void \mbox{\hyperlink{_display_8ino_a756efac71e8cf83b5add1ffcb9035a20}{setup\+Display}} (\mbox{\hyperlink{_display_8h_a2dded6e25e0cb307491fd7997b66b2a4}{Measurement\+Screen\+Data}} ms\+Data, \mbox{\hyperlink{_display_8h_a412053d6576f296892a8ccc0d8510e46}{Screen}} \mbox{\hyperlink{_main_8h_a25cab1c2dd63e90138b14fec27cecc4b}{screen}})
\item 
void \mbox{\hyperlink{_display_8ino_ad2818acb0d1eb44a804059aa40c432b3}{display\+Update}} (\mbox{\hyperlink{_display_8h_a2dded6e25e0cb307491fd7997b66b2a4}{Measurement\+Screen\+Data}} ms\+Data, \mbox{\hyperlink{_display_8h_a412053d6576f296892a8ccc0d8510e46}{Screen}} \mbox{\hyperlink{_main_8h_a25cab1c2dd63e90138b14fec27cecc4b}{screen}})
\item 
void \mbox{\hyperlink{_display_8ino_a48f20f2ac1788f51aaa3aefd6c8ccb96}{thermi\+Data\+Print}} (bool thermi\+Data\+Print)
\item 
void \mbox{\hyperlink{_display_8ino_a1faaa02c20faaddf6f9e78859eb3cb0c}{time\+Print}} ()
\item 
void \mbox{\hyperlink{_display_8ino_a2b73a1c90c594f4d6e205cf19666468a}{setup\+Measurement\+Screen}} (\mbox{\hyperlink{_display_8h_a412053d6576f296892a8ccc0d8510e46}{Screen}} \mbox{\hyperlink{_main_8h_a25cab1c2dd63e90138b14fec27cecc4b}{screen}})
\item 
void \mbox{\hyperlink{_display_8ino_a9622e737a6a548ba9f9ffcbb6ed1bb2d}{erase\+Then\+Print}} (int x\+Pos, int y\+Pos, String old\+Data, String new\+Data)
\item 
void \mbox{\hyperlink{_display_8ino_acf63fd6f02499d20156ded2a3582fb9b}{erase\+Then\+Print\+SPEEDO}} (int x\+Pos, int y\+Pos, String old\+Data, String new\+Data)
\item 
void \mbox{\hyperlink{_display_8ino_a2fcaba5d0c64fb3389132dca04224211}{manual\+Screen\+Data\+Updater}} ()
\item 
float \mbox{\hyperlink{_display_8ino_ad609934bdce8f8169cc609cb7913f507}{aux\+\_\+voltage\+\_\+read}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{_display_8ino}{Display.\+ino}} file executes the Display task for the bike\textquotesingle{}s firmware. This calls on the variables that are initialized in \mbox{\hyperlink{_display_8h}{Display.\+h}} and then calls on various methods from the ILI9341\textquotesingle{}s adafruit display library to update the display. Updating the display includes comparing old and new data to ensure data has changed, erasing the previous data if it\textquotesingle{}s changed and writing in the new data. 

\begin{DoxyAuthor}{Author}
Washington Superbike 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
1-\/March-\/2023
\end{DoxyDate}
\begin{DoxyNote}{Note}
This works. Display does slow down a bit in the speedometer screen, but that is also due to often the numbers were changing in the \mbox{\hyperlink{_display_8ino_a2fcaba5d0c64fb3389132dca04224211}{manual\+Screen\+Data\+Updater()}}method updating data too frequently. Just consider reducing the size of the text in case it looks like it is updating too slowly at speeds of $\sim$60-\/80 mph.
\end{DoxyNote}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000006}{Todo}}]PLEASE remove the whole screen parameter situation. Change the \char`\"{}screen\char`\"{} variable in the \mbox{\hyperlink{_main_8h}{Main.\+h}} to be a \#define macro and then just check the value from here by directly including \mbox{\hyperlink{_main_8h}{Main.\+h}} and finding that value. Ez. ~\newline
 ~\newline
 Remove all unused vars and tighten up methods. ~\newline
 ~\newline
 There are WAY more macros (\#define statements) that need to be written for defining some frequently used values in display. Can\textquotesingle{}t think of them off the top of my head, but make and use those. ~\newline
 ~\newline
 Change the thermistor code to use \char`\"{}\+NUM\+\_\+\+THERMI\char`\"{} from \mbox{\hyperlink{_main_8h}{Main.\+h}} ~\newline
 ~\newline
 In the speedometer screen, add code to show angles. If the angle is near the threshold (\texorpdfstring{$>$}{>} $\sim$30 degrees), show it in red. If the angle is near safe (\texorpdfstring{$<$}{<} $\sim$30 degrees), show it in green. Add an indicator that prints out pre\+Charge statuses This variable is called hv\+\_\+state in \mbox{\hyperlink{_precharge_8h}{pre\+Charge.\+h}} basically print out this variable if possbie. This is similar to how cars print out engine flags, etc. \end{DoxyRefDesc}


Definition in file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_display_8ino_ad609934bdce8f8169cc609cb7913f507}\label{_display_8ino_ad609934bdce8f8169cc609cb7913f507}} 
\index{Display.ino@{Display.ino}!aux\_voltage\_read@{aux\_voltage\_read}}
\index{aux\_voltage\_read@{aux\_voltage\_read}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{aux\_voltage\_read()}{aux\_voltage\_read()}}
{\footnotesize\ttfamily float aux\+\_\+voltage\+\_\+read (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Reads in the aux\+\_\+voltage of the LV system and reads in the values. Would be better in CAN, but alas Chase said leave it here, it\textquotesingle{}s here.

Definition at line \mbox{\hyperlink{_display_8ino_source_l00290}{290}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_abbc2dd9c7d8fc4714a0379f70d919047}\label{_display_8ino_abbc2dd9c7d8fc4714a0379f70d919047}} 
\index{Display.ino@{Display.ino}!displayTask@{displayTask}}
\index{displayTask@{displayTask}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{displayTask()}{displayTask()}}
{\footnotesize\ttfamily void display\+Task (\begin{DoxyParamCaption}\item[{void $\ast$}]{display\+Task\+Wrap }\end{DoxyParamCaption})}

Parses the data from the void pointer to be processable? Idk if that\textquotesingle{}s word. Passes the measurement\+Screen\+Data form the display\+Task\+Wrap data and the Screen data from the display\+Task\+Wrap data to the \mbox{\hyperlink{_display_8ino_ad2818acb0d1eb44a804059aa40c432b3}{display\+Update()}} method. The \mbox{\hyperlink{_display_8ino_ad2818acb0d1eb44a804059aa40c432b3}{display\+Update()}} method then processes it and updates the screen accordingly.

Definition at line \mbox{\hyperlink{_display_8ino_source_l00044}{44}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_ad2818acb0d1eb44a804059aa40c432b3}\label{_display_8ino_ad2818acb0d1eb44a804059aa40c432b3}} 
\index{Display.ino@{Display.ino}!displayUpdate@{displayUpdate}}
\index{displayUpdate@{displayUpdate}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{displayUpdate()}{displayUpdate()}}
{\footnotesize\ttfamily void display\+Update (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_display_8h_a2dded6e25e0cb307491fd7997b66b2a4}{Measurement\+Screen\+Data}}}]{ms\+Data,  }\item[{\mbox{\hyperlink{_display_8h_a412053d6576f296892a8ccc0d8510e46}{Screen}}}]{screen }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_display_8ino_source_l00098}{98}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_a9622e737a6a548ba9f9ffcbb6ed1bb2d}\label{_display_8ino_a9622e737a6a548ba9f9ffcbb6ed1bb2d}} 
\index{Display.ino@{Display.ino}!eraseThenPrint@{eraseThenPrint}}
\index{eraseThenPrint@{eraseThenPrint}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{eraseThenPrint()}{eraseThenPrint()}}
{\footnotesize\ttfamily void erase\+Then\+Print (\begin{DoxyParamCaption}\item[{int}]{x\+Pos,  }\item[{int}]{y\+Pos,  }\item[{String}]{old\+Data,  }\item[{String}]{new\+Data }\end{DoxyParamCaption})}

Erases the old value using the old\+Data parameter by writing it in white text and then setting it to black text to write the new\+Data.

Definition at line \mbox{\hyperlink{_display_8ino_source_l00246}{246}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_acf63fd6f02499d20156ded2a3582fb9b}\label{_display_8ino_acf63fd6f02499d20156ded2a3582fb9b}} 
\index{Display.ino@{Display.ino}!eraseThenPrintSPEEDO@{eraseThenPrintSPEEDO}}
\index{eraseThenPrintSPEEDO@{eraseThenPrintSPEEDO}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{eraseThenPrintSPEEDO()}{eraseThenPrintSPEEDO()}}
{\footnotesize\ttfamily void erase\+Then\+Print\+SPEEDO (\begin{DoxyParamCaption}\item[{int}]{x\+Pos,  }\item[{int}]{y\+Pos,  }\item[{String}]{old\+Data,  }\item[{String}]{new\+Data }\end{DoxyParamCaption})}

Just a flipped color version of \mbox{\hyperlink{_display_8ino_a9622e737a6a548ba9f9ffcbb6ed1bb2d}{erase\+Then\+Print()}} Erases the old value using the old\+Data parameter by writing it in black text and then setting it to white text to write the new\+Data.

Definition at line \mbox{\hyperlink{_display_8ino_source_l00257}{257}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_a2fcaba5d0c64fb3389132dca04224211}\label{_display_8ino_a2fcaba5d0c64fb3389132dca04224211}} 
\index{Display.ino@{Display.ino}!manualScreenDataUpdater@{manualScreenDataUpdater}}
\index{manualScreenDataUpdater@{manualScreenDataUpdater}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{manualScreenDataUpdater()}{manualScreenDataUpdater()}}
{\footnotesize\ttfamily void manual\+Screen\+Data\+Updater (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Iterates through all the printed\+Vals array and then does += 1 to make sure it\textquotesingle{}s increasing. This change should be reflected in the display itself.

Definition at line \mbox{\hyperlink{_display_8ino_source_l00275}{275}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_a756efac71e8cf83b5add1ffcb9035a20}\label{_display_8ino_a756efac71e8cf83b5add1ffcb9035a20}} 
\index{Display.ino@{Display.ino}!setupDisplay@{setupDisplay}}
\index{setupDisplay@{setupDisplay}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{setupDisplay()}{setupDisplay()}}
{\footnotesize\ttfamily void setup\+Display (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_display_8h_a2dded6e25e0cb307491fd7997b66b2a4}{Measurement\+Screen\+Data}}}]{ms\+Data,  }\item[{\mbox{\hyperlink{_display_8h_a412053d6576f296892a8ccc0d8510e46}{Screen}}}]{screen }\end{DoxyParamCaption})}

Calls on tft.\+begin() method and sets the orientation using tft.\+set\+Rotatio() and also sets the screen to ILI9341\+\_\+\+WHITE or ILI9341\+\_\+\+BLACK based on Debugging or Speedometer screen.

Initializes all the Printed\+Data\+Structs to set their position, values, and point to the correct pointer corresponding to the correct data.

Calls on the \mbox{\hyperlink{_display_8ino_a2b73a1c90c594f4d6e205cf19666468a}{setup\+Measurement\+Screen()}} to finish up the setup.

Definition at line \mbox{\hyperlink{_display_8ino_source_l00059}{59}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_a2b73a1c90c594f4d6e205cf19666468a}\label{_display_8ino_a2b73a1c90c594f4d6e205cf19666468a}} 
\index{Display.ino@{Display.ino}!setupMeasurementScreen@{setupMeasurementScreen}}
\index{setupMeasurementScreen@{setupMeasurementScreen}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{setupMeasurementScreen()}{setupMeasurementScreen()}}
{\footnotesize\ttfamily void setup\+Measurement\+Screen (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_display_8h_a412053d6576f296892a8ccc0d8510e46}{Screen}}}]{screen }\end{DoxyParamCaption})}

If the screen is debugging type, it will print out all the data labels in their data locations as a black text This is achieved using a bunch of tft methods. Nice.

If the screen is speedometer type, it will print out all the data labels in their locations (SPEED up top and RPM at the bottom). This is achieved using a bunch of tft methods. Nice.

Definition at line \mbox{\hyperlink{_display_8ino_source_l00207}{207}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_a48f20f2ac1788f51aaa3aefd6c8ccb96}\label{_display_8ino_a48f20f2ac1788f51aaa3aefd6c8ccb96}} 
\index{Display.ino@{Display.ino}!thermiDataPrint@{thermiDataPrint}}
\index{thermiDataPrint@{thermiDataPrint}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{thermiDataPrint()}{thermiDataPrint()}}
{\footnotesize\ttfamily void thermi\+Data\+Print (\begin{DoxyParamCaption}\item[{bool}]{thermi\+Data\+Print }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_display_8ino_source_l00146}{146}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

\mbox{\Hypertarget{_display_8ino_a1faaa02c20faaddf6f9e78859eb3cb0c}\label{_display_8ino_a1faaa02c20faaddf6f9e78859eb3cb0c}} 
\index{Display.ino@{Display.ino}!timePrint@{timePrint}}
\index{timePrint@{timePrint}!Display.ino@{Display.ino}}
\doxysubsubsection{\texorpdfstring{timePrint()}{timePrint()}}
{\footnotesize\ttfamily void time\+Print (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_display_8ino_source_l00196}{196}} of file \mbox{\hyperlink{_display_8ino_source}{Display.\+ino}}.

