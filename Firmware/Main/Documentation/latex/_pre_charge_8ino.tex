\hypertarget{_pre_charge_8ino}{}\doxysection{Pre\+Charge.\+ino File Reference}
\label{_pre_charge_8ino}\index{PreCharge.ino@{PreCharge.ino}}


The \mbox{\hyperlink{_pre_charge_8ino}{Pre\+Charge.\+ino}} file for the Pre\+Charge/\+Controls task for the bike\textquotesingle{}s firmware. This calls on the stats that are updated by CAN and then updates the state of controls (HV Off, ON, etc.) based on them. Pretty simple. This also reads in the gyroscope data to determine when to kill power to the bike.  


{\ttfamily \#include \char`\"{}Precharge.\+h\char`\"{}}\newline
{\ttfamily \#include $<$Wire.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_pre_charge_8ino_a2cd6f5c27d7667dbd0b6a0bc756340a3}{precharge\+Task}} (void $\ast$task\+Data)
\item 
void \mbox{\hyperlink{_pre_charge_8ino_ad5e3efaa785dcd1d9143ec7e5d117277}{pre\+Charge\+Circuit\+FSMTransitions}} (\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}} \mbox{\hyperlink{_main_8h_a695dccac97a0f45cf570237e981b2b5d}{pre\+Charge\+Data}})
\item 
void \mbox{\hyperlink{_pre_charge_8ino_ad2376a25ab645f00587791af3c89968e}{pre\+Charge\+Circuit\+FSMState\+Actions}} (\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}} \mbox{\hyperlink{_main_8h_a695dccac97a0f45cf570237e981b2b5d}{pre\+Charge\+Data}})
\item 
bool \mbox{\hyperlink{_pre_charge_8ino_a42b25fa6ccd2c8d82ba24c5ed4aaa7d1}{is\+Precharged}} (\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}} \mbox{\hyperlink{_main_8h_a695dccac97a0f45cf570237e981b2b5d}{pre\+Charge\+Data}})
\item 
bool \mbox{\hyperlink{_pre_charge_8ino_a65867cb936f7ef47ffd07fbfd4a91355}{is\+HVSafe}} (\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}} \mbox{\hyperlink{_main_8h_a695dccac97a0f45cf570237e981b2b5d}{pre\+Charge\+Data}})
\item 
bool \mbox{\hyperlink{_pre_charge_8ino_a6798f4bd0a5b6353886f894b38b32473}{check\+\_\+\+HV\+\_\+\+TOGGLE}} ()
\item 
char $\ast$ \mbox{\hyperlink{_pre_charge_8ino_a0a3e1d4e80c1320d3308a0e0bb10ac87}{state\+\_\+name}} (\mbox{\hyperlink{_precharge_8h_a5faacefaff4b0ce77f1f8be0bf2aaf29}{HV\+\_\+\+STATE}} state)
\item 
void \mbox{\hyperlink{_pre_charge_8ino_a5782bd590f95fb2269eb43a3d70c18f4}{setup\+I2C}} (\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}} \mbox{\hyperlink{_main_8h_a695dccac97a0f45cf570237e981b2b5d}{pre\+Charge\+Data}})
\item 
void \mbox{\hyperlink{_pre_charge_8ino_ad8511ef84de5112bd6beb8e3ac5fff67}{gyro\+\_\+signals}} (\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}} \mbox{\hyperlink{_main_8h_a695dccac97a0f45cf570237e981b2b5d}{pre\+Charge\+Data}})
\item 
void \mbox{\hyperlink{_pre_charge_8ino_a87184d718be6821c71e697fc1fd98d3b}{update\+Gyro\+Data}} (\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}} \mbox{\hyperlink{_main_8h_a695dccac97a0f45cf570237e981b2b5d}{pre\+Charge\+Data}})
\item 
void \mbox{\hyperlink{_pre_charge_8ino_ade8f654468b951602d2622b34902944f}{kalman\+\_\+1d}} (float Kalman\+State, float Kalman\+Uncertainty, float Kalman\+Input, float Kalman\+Measurement, \mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}} \mbox{\hyperlink{_main_8h_a695dccac97a0f45cf570237e981b2b5d}{pre\+Charge\+Data}})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{_pre_charge_8ino}{Pre\+Charge.\+ino}} file for the Pre\+Charge/\+Controls task for the bike\textquotesingle{}s firmware. This calls on the stats that are updated by CAN and then updates the state of controls (HV Off, ON, etc.) based on them. Pretty simple. This also reads in the gyroscope data to determine when to kill power to the bike. 

\begin{DoxyAuthor}{Author}
Washington Superbike 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
1-\/March-\/2023
\end{DoxyDate}
\begin{DoxyNote}{Note}
up all members to be able to use it without any trouble.
\end{DoxyNote}
\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000010}{Todo}}]Goal 1. ~\newline
 ~\newline
 Goal 2. ~\newline
 ~\newline
 Goal 3. ~\newline
 ~\newline
 Final Goal. \end{DoxyRefDesc}


Definition in file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_pre_charge_8ino_a6798f4bd0a5b6353886f894b38b32473}\label{_pre_charge_8ino_a6798f4bd0a5b6353886f894b38b32473}} 
\index{PreCharge.ino@{PreCharge.ino}!check\_HV\_TOGGLE@{check\_HV\_TOGGLE}}
\index{check\_HV\_TOGGLE@{check\_HV\_TOGGLE}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{check\_HV\_TOGGLE()}{check\_HV\_TOGGLE()}}
{\footnotesize\ttfamily bool check\+\_\+\+HV\+\_\+\+TOGGLE (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00188}{188}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_ad8511ef84de5112bd6beb8e3ac5fff67}\label{_pre_charge_8ino_ad8511ef84de5112bd6beb8e3ac5fff67}} 
\index{PreCharge.ino@{PreCharge.ino}!gyro\_signals@{gyro\_signals}}
\index{gyro\_signals@{gyro\_signals}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{gyro\_signals()}{gyro\_signals()}}
{\footnotesize\ttfamily void gyro\+\_\+signals (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}}}]{pre\+Charge\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00230}{230}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_a65867cb936f7ef47ffd07fbfd4a91355}\label{_pre_charge_8ino_a65867cb936f7ef47ffd07fbfd4a91355}} 
\index{PreCharge.ino@{PreCharge.ino}!isHVSafe@{isHVSafe}}
\index{isHVSafe@{isHVSafe}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{isHVSafe()}{isHVSafe()}}
{\footnotesize\ttfamily bool is\+HVSafe (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}}}]{pre\+Charge\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00167}{167}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_a42b25fa6ccd2c8d82ba24c5ed4aaa7d1}\label{_pre_charge_8ino_a42b25fa6ccd2c8d82ba24c5ed4aaa7d1}} 
\index{PreCharge.ino@{PreCharge.ino}!isPrecharged@{isPrecharged}}
\index{isPrecharged@{isPrecharged}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{isPrecharged()}{isPrecharged()}}
{\footnotesize\ttfamily bool is\+Precharged (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}}}]{pre\+Charge\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00152}{152}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_ade8f654468b951602d2622b34902944f}\label{_pre_charge_8ino_ade8f654468b951602d2622b34902944f}} 
\index{PreCharge.ino@{PreCharge.ino}!kalman\_1d@{kalman\_1d}}
\index{kalman\_1d@{kalman\_1d}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{kalman\_1d()}{kalman\_1d()}}
{\footnotesize\ttfamily void kalman\+\_\+1d (\begin{DoxyParamCaption}\item[{float}]{Kalman\+State,  }\item[{float}]{Kalman\+Uncertainty,  }\item[{float}]{Kalman\+Input,  }\item[{float}]{Kalman\+Measurement,  }\item[{\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}}}]{pre\+Charge\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00319}{319}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_ad2376a25ab645f00587791af3c89968e}\label{_pre_charge_8ino_ad2376a25ab645f00587791af3c89968e}} 
\index{PreCharge.ino@{PreCharge.ino}!preChargeCircuitFSMStateActions@{preChargeCircuitFSMStateActions}}
\index{preChargeCircuitFSMStateActions@{preChargeCircuitFSMStateActions}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{preChargeCircuitFSMStateActions()}{preChargeCircuitFSMStateActions()}}
{\footnotesize\ttfamily void pre\+Charge\+Circuit\+FSMState\+Actions (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}}}]{pre\+Charge\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00128}{128}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_ad5e3efaa785dcd1d9143ec7e5d117277}\label{_pre_charge_8ino_ad5e3efaa785dcd1d9143ec7e5d117277}} 
\index{PreCharge.ino@{PreCharge.ino}!preChargeCircuitFSMTransitions@{preChargeCircuitFSMTransitions}}
\index{preChargeCircuitFSMTransitions@{preChargeCircuitFSMTransitions}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{preChargeCircuitFSMTransitions()}{preChargeCircuitFSMTransitions()}}
{\footnotesize\ttfamily void pre\+Charge\+Circuit\+FSMTransitions (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}}}]{pre\+Charge\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00068}{68}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_a2cd6f5c27d7667dbd0b6a0bc756340a3}\label{_pre_charge_8ino_a2cd6f5c27d7667dbd0b6a0bc756340a3}} 
\index{PreCharge.ino@{PreCharge.ino}!prechargeTask@{prechargeTask}}
\index{prechargeTask@{prechargeTask}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{prechargeTask()}{prechargeTask()}}
{\footnotesize\ttfamily void precharge\+Task (\begin{DoxyParamCaption}\item[{void $\ast$}]{task\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00054}{54}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_a5782bd590f95fb2269eb43a3d70c18f4}\label{_pre_charge_8ino_a5782bd590f95fb2269eb43a3d70c18f4}} 
\index{PreCharge.ino@{PreCharge.ino}!setupI2C@{setupI2C}}
\index{setupI2C@{setupI2C}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{setupI2C()}{setupI2C()}}
{\footnotesize\ttfamily void setup\+I2C (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}}}]{pre\+Charge\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00201}{201}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_a0a3e1d4e80c1320d3308a0e0bb10ac87}\label{_pre_charge_8ino_a0a3e1d4e80c1320d3308a0e0bb10ac87}} 
\index{PreCharge.ino@{PreCharge.ino}!state\_name@{state\_name}}
\index{state\_name@{state\_name}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{state\_name()}{state\_name()}}
{\footnotesize\ttfamily char $\ast$ state\+\_\+name (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_precharge_8h_a5faacefaff4b0ce77f1f8be0bf2aaf29}{HV\+\_\+\+STATE}}}]{state }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00192}{192}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

\mbox{\Hypertarget{_pre_charge_8ino_a87184d718be6821c71e697fc1fd98d3b}\label{_pre_charge_8ino_a87184d718be6821c71e697fc1fd98d3b}} 
\index{PreCharge.ino@{PreCharge.ino}!updateGyroData@{updateGyroData}}
\index{updateGyroData@{updateGyroData}!PreCharge.ino@{PreCharge.ino}}
\doxysubsubsection{\texorpdfstring{updateGyroData()}{updateGyroData()}}
{\footnotesize\ttfamily void update\+Gyro\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_pre_charge_task_data}{Pre\+Charge\+Task\+Data}}}]{pre\+Charge\+Data }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_pre_charge_8ino_source_l00297}{297}} of file \mbox{\hyperlink{_pre_charge_8ino_source}{Pre\+Charge.\+ino}}.

