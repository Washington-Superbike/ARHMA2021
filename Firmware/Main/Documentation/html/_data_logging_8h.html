<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Superbike Firmware: DataLogging.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Superbike Firmware
   </div>
   <div id="projectbrief">Firmware for ARHMA Race 2023</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">DataLogging.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="_data_logging_8h.html" title="The DataLogging.h config file for the DataLogging task for the bike&#39;s firmware. This defines the vari...">DataLogging.h</a> config file for the DataLogging task for the bike's firmware. This defines the variables that are passed along to the <a class="el" href="_data_logging_8ino.html" title="The DataLogging.ino file is used to excecute on the DataLogging task for the bike&#39;s firmware....">DataLogging.ino</a> file and others if they use it. Then it creates the initial reference (there's a proper C programming term for it) for all the methods used in <a class="el" href="_data_logging_8ino.html" title="The DataLogging.ino file is used to excecute on the DataLogging task for the bike&#39;s firmware....">DataLogging.ino</a>. This file also creates two typedef structs that basically allow us to package the data in DataLogging for the task in a nice way. The other struct <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> is used to organize the data properly to be used in the SdFat framework to write to the SD card. Like all header files, this exists as the skeleton/framework for the .ino or main c file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;SdFat.h&quot;</code><br />
</div>
<p><a href="_data_logging_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_data_logging_task_data.html">DataLoggingTaskData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af4a74cae27161ee93cd63ef70a0082e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#af4a74cae27161ee93cd63ef70a0082e2">DATALOGGING_TASK_STACK_SIZE</a>&#160;&#160;&#160;<a class="el" href="_free_r_t_o_s_config__default_8h.html#a6c534a6cf8a00528fe0be42083484f9a">configMINIMAL_STACK_SIZE</a> + 32368</td></tr>
<tr class="memdesc:af4a74cae27161ee93cd63ef70a0082e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses the configMINIMAL_STACK_SIZE variable in <a class="el" href="_main_8h.html" title="The main config file for bike firmware. This initializes all variables that are passed along to all o...">Main.h</a> to add up to the stack size used for the <a class="el" href="_data_logging_8h.html#a24f7ab7e53619e5770ad9acc25b9b819">dataLoggingTask()</a>  <a href="_data_logging_8h.html#af4a74cae27161ee93cd63ef70a0082e2">More...</a><br /></td></tr>
<tr class="separator:af4a74cae27161ee93cd63ef70a0082e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00c3fd81cebf8f7797f97204750ba99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#af00c3fd81cebf8f7797f97204750ba99">MOTOR_TEMPERATURE_LOG</a>&#160;&#160;&#160;&quot;motor_temperature_log.csv&quot;</td></tr>
<tr class="memdesc:af00c3fd81cebf8f7797f97204750ba99"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name for the motor temperature log.  <a href="_data_logging_8h.html#af00c3fd81cebf8f7797f97204750ba99">More...</a><br /></td></tr>
<tr class="separator:af00c3fd81cebf8f7797f97204750ba99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9b2c0322cedfd8d3cd1c9dbb513b10f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#ab9b2c0322cedfd8d3cd1c9dbb513b10f">MOTOR_CONTROLLER_TEMPERATURE_LOG</a>&#160;&#160;&#160;&quot;motor_controller_temperature_log.csv&quot;</td></tr>
<tr class="memdesc:ab9b2c0322cedfd8d3cd1c9dbb513b10f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name for the motor controller temperature log.  <a href="_data_logging_8h.html#ab9b2c0322cedfd8d3cd1c9dbb513b10f">More...</a><br /></td></tr>
<tr class="separator:ab9b2c0322cedfd8d3cd1c9dbb513b10f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad345eeebe4d36d151827e130e6082a1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#ad345eeebe4d36d151827e130e6082a1b">BMS_VOLTAGE_LOG</a>&#160;&#160;&#160;&quot;bms_voltage_log.csv&quot;</td></tr>
<tr class="memdesc:ad345eeebe4d36d151827e130e6082a1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name for the BMS voltage log.  <a href="_data_logging_8h.html#ad345eeebe4d36d151827e130e6082a1b">More...</a><br /></td></tr>
<tr class="separator:ad345eeebe4d36d151827e130e6082a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f856128abdd56434d31edd1f4ce549"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a34f856128abdd56434d31edd1f4ce549">MOTOR_CONTROLLER_VOLTAGE_LOG</a>&#160;&#160;&#160;&quot;motor_controller_voltage_log.csv&quot;</td></tr>
<tr class="memdesc:a34f856128abdd56434d31edd1f4ce549"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name for the motor controller voltage log.  <a href="_data_logging_8h.html#a34f856128abdd56434d31edd1f4ce549">More...</a><br /></td></tr>
<tr class="separator:a34f856128abdd56434d31edd1f4ce549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa98fafae382d16d375eeef356bf55917"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#aa98fafae382d16d375eeef356bf55917">MOTOR_CURRENT_LOG</a>&#160;&#160;&#160;&quot;current_log.csv&quot;</td></tr>
<tr class="memdesc:aa98fafae382d16d375eeef356bf55917"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name for the motor controller current log.  <a href="_data_logging_8h.html#aa98fafae382d16d375eeef356bf55917">More...</a><br /></td></tr>
<tr class="separator:aa98fafae382d16d375eeef356bf55917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2665461802b5e24f2d0f9d8f1ca8351d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a2665461802b5e24f2d0f9d8f1ca8351d">THERMISTOR_LOG</a>&#160;&#160;&#160;&quot;thermistor_log.csv&quot;</td></tr>
<tr class="memdesc:a2665461802b5e24f2d0f9d8f1ca8351d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name for the thermistor temperature log.  <a href="_data_logging_8h.html#a2665461802b5e24f2d0f9d8f1ca8351d">More...</a><br /></td></tr>
<tr class="separator:a2665461802b5e24f2d0f9d8f1ca8351d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b33dd28efa07f171323d23a5f714d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#af7b33dd28efa07f171323d23a5f714d2">RPM_LOG</a>&#160;&#160;&#160;&quot;rpm_log.csv&quot;</td></tr>
<tr class="memdesc:af7b33dd28efa07f171323d23a5f714d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name for the motor RPM log.  <a href="_data_logging_8h.html#af7b33dd28efa07f171323d23a5f714d2">More...</a><br /></td></tr>
<tr class="separator:af7b33dd28efa07f171323d23a5f714d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ac2ad7f431e3446fddcd9b6b9f93c4c14"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#ac2ad7f431e3446fddcd9b6b9f93c4c14">data_type</a> { <a class="el" href="_data_logging_8h.html#ac2ad7f431e3446fddcd9b6b9f93c4c14afd5a5f51ce25953f3db2c7e93eb7864a">INT</a>
, <a class="el" href="_data_logging_8h.html#ac2ad7f431e3446fddcd9b6b9f93c4c14a9cf4a0866224b0bb4a7a895da27c9c4c">FLOAT</a>
 }</td></tr>
<tr class="separator:ac2ad7f431e3446fddcd9b6b9f93c4c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a24f7ab7e53619e5770ad9acc25b9b819"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a24f7ab7e53619e5770ad9acc25b9b819">dataLoggingTask</a> (void *dlData)</td></tr>
<tr class="separator:a24f7ab7e53619e5770ad9acc25b9b819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2a3a213399ec010b89dede4ba4de77"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a0d2a3a213399ec010b89dede4ba4de77">startSD</a> ()</td></tr>
<tr class="separator:a0d2a3a213399ec010b89dede4ba4de77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac579da51eca1f113da5d315ab23b8b1e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#ac579da51eca1f113da5d315ab23b8b1e">openFile</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer)</td></tr>
<tr class="separator:ac579da51eca1f113da5d315ab23b8b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c88f7cc0c34cd0a584f78997f13827"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a10c88f7cc0c34cd0a584f78997f13827">closeFile</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer)</td></tr>
<tr class="separator:a10c88f7cc0c34cd0a584f78997f13827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678245415389e1bbd75b088a980b008a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a678245415389e1bbd75b088a980b008a">saveFile</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer)</td></tr>
<tr class="separator:a678245415389e1bbd75b088a980b008a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52d8bf385131a3543793f22ee432100a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a52d8bf385131a3543793f22ee432100a">saveFiles</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> **writers, int writersLen)</td></tr>
<tr class="separator:a52d8bf385131a3543793f22ee432100a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8777416fb5b01666e7b28ada9f3b552a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a8777416fb5b01666e7b28ada9f3b552a">printFile</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer)</td></tr>
<tr class="separator:a8777416fb5b01666e7b28ada9f3b552a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa394fd0868d0e097f701cb3f21d9c451"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#aa394fd0868d0e097f701cb3f21d9c451">addRecord</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer, int sTime)</td></tr>
<tr class="separator:aa394fd0868d0e097f701cb3f21d9c451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab91616c118b701c2afd9136393d1f19b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#ab91616c118b701c2afd9136393d1f19b">startRecording</a> ()</td></tr>
<tr class="separator:ab91616c118b701c2afd9136393d1f19b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a587c91dc29e14d8227957fbe22af6f45"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a587c91dc29e14d8227957fbe22af6f45">SD_CS_PIN</a> = SS</td></tr>
<tr class="memdesc:a587c91dc29e14d8227957fbe22af6f45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use built-in SD for SPI modes on Teensy 3.5/3.6.  <a href="_data_logging_8h.html#a587c91dc29e14d8227957fbe22af6f45">More...</a><br /></td></tr>
<tr class="separator:a587c91dc29e14d8227957fbe22af6f45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a888ed23a146630d5e36a08aed19ff638"><td class="memItemLeft" align="right" valign="top">const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a888ed23a146630d5e36a08aed19ff638">BUF_DIM</a> = 4096</td></tr>
<tr class="separator:a888ed23a146630d5e36a08aed19ff638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e6b7e1f0fb2d1e0fe1654721bb5302"><td class="memItemLeft" align="right" valign="top">SdFat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a15e6b7e1f0fb2d1e0fe1654721bb5302">sd</a></td></tr>
<tr class="memdesc:a15e6b7e1f0fb2d1e0fe1654721bb5302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents the serial connection to the sd card and any internal buffers.  <a href="_data_logging_8h.html#a15e6b7e1f0fb2d1e0fe1654721bb5302">More...</a><br /></td></tr>
<tr class="separator:a15e6b7e1f0fb2d1e0fe1654721bb5302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b197693eeaad244ff381d5645b1c16"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8h.html#a90b197693eeaad244ff381d5645b1c16">epochTime</a></td></tr>
<tr class="memdesc:a90b197693eeaad244ff381d5645b1c16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents the time that recording started.  <a href="_data_logging_8h.html#a90b197693eeaad244ff381d5645b1c16">More...</a><br /></td></tr>
<tr class="separator:a90b197693eeaad244ff381d5645b1c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The <a class="el" href="_data_logging_8h.html" title="The DataLogging.h config file for the DataLogging task for the bike&#39;s firmware. This defines the vari...">DataLogging.h</a> config file for the DataLogging task for the bike's firmware. This defines the variables that are passed along to the <a class="el" href="_data_logging_8ino.html" title="The DataLogging.ino file is used to excecute on the DataLogging task for the bike&#39;s firmware....">DataLogging.ino</a> file and others if they use it. Then it creates the initial reference (there's a proper C programming term for it) for all the methods used in <a class="el" href="_data_logging_8ino.html" title="The DataLogging.ino file is used to excecute on the DataLogging task for the bike&#39;s firmware....">DataLogging.ino</a>. This file also creates two typedef structs that basically allow us to package the data in DataLogging for the task in a nice way. The other struct <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> is used to organize the data properly to be used in the SdFat framework to write to the SD card. Like all header files, this exists as the skeleton/framework for the .ino or main c file. </p>
<dl class="section author"><dt>Author</dt><dd>Washington Superbike </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1-March-2023</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Honestly, I dont see any need to fix this further. The only thing I foresee, is that the State of Charge team would be more interested in tweaking the macros (#define statements) and other aspects of this file and <a class="el" href="_main_8h.html" title="The main config file for bike firmware. This initializes all variables that are passed along to all o...">Main.h</a> to ensure that they can add more files into the DataLogging task. <br  />
 <br  />
 Clarification on how SD card stores data: each block is generally about 512 or bytes. SdFat stores an internal buffer of 512 and when the limit is reached only then does it save the data onto the sd card. This is an important trade off if we are less than that value and the bike suddenly turns off, those &lt;512 bytes aren't stored unless we somehow flush the data or use file.close(); this means we should potentially implement a signal for recording values, or even just only record when the HV system is on (not for testing things like precharge obv) or we just periodically flush data but that uses more resources on the teensy (this depends on how long it takes + how fast we are writing data)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Just add the LV current or the added up current to the current logging situation. Could be useful in future if we want to be tryhards and use a neural network to process currents or just to log our current and see what went wrong in the race. (Latter is way more likely) <br  />
 <br  />
 Goal 2. <br  />
 <br  />
 Goal 3. <br  />
 <br  />
 Final Goal. </dd></dl>

<p class="definition">Definition in file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad345eeebe4d36d151827e130e6082a1b" name="ad345eeebe4d36d151827e130e6082a1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad345eeebe4d36d151827e130e6082a1b">&#9670;&nbsp;</a></span>BMS_VOLTAGE_LOG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BMS_VOLTAGE_LOG&#160;&#160;&#160;&quot;bms_voltage_log.csv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name for the BMS voltage log. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00052">52</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="af4a74cae27161ee93cd63ef70a0082e2" name="af4a74cae27161ee93cd63ef70a0082e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4a74cae27161ee93cd63ef70a0082e2">&#9670;&nbsp;</a></span>DATALOGGING_TASK_STACK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATALOGGING_TASK_STACK_SIZE&#160;&#160;&#160;<a class="el" href="_free_r_t_o_s_config__default_8h.html#a6c534a6cf8a00528fe0be42083484f9a">configMINIMAL_STACK_SIZE</a> + 32368</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses the configMINIMAL_STACK_SIZE variable in <a class="el" href="_main_8h.html" title="The main config file for bike firmware. This initializes all variables that are passed along to all o...">Main.h</a> to add up to the stack size used for the <a class="el" href="_data_logging_8h.html#a24f7ab7e53619e5770ad9acc25b9b819">dataLoggingTask()</a> </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00044">44</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="ab9b2c0322cedfd8d3cd1c9dbb513b10f" name="ab9b2c0322cedfd8d3cd1c9dbb513b10f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9b2c0322cedfd8d3cd1c9dbb513b10f">&#9670;&nbsp;</a></span>MOTOR_CONTROLLER_TEMPERATURE_LOG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTOR_CONTROLLER_TEMPERATURE_LOG&#160;&#160;&#160;&quot;motor_controller_temperature_log.csv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name for the motor controller temperature log. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00050">50</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="a34f856128abdd56434d31edd1f4ce549" name="a34f856128abdd56434d31edd1f4ce549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f856128abdd56434d31edd1f4ce549">&#9670;&nbsp;</a></span>MOTOR_CONTROLLER_VOLTAGE_LOG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTOR_CONTROLLER_VOLTAGE_LOG&#160;&#160;&#160;&quot;motor_controller_voltage_log.csv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name for the motor controller voltage log. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00054">54</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="aa98fafae382d16d375eeef356bf55917" name="aa98fafae382d16d375eeef356bf55917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa98fafae382d16d375eeef356bf55917">&#9670;&nbsp;</a></span>MOTOR_CURRENT_LOG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTOR_CURRENT_LOG&#160;&#160;&#160;&quot;current_log.csv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name for the motor controller current log. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00056">56</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="af00c3fd81cebf8f7797f97204750ba99" name="af00c3fd81cebf8f7797f97204750ba99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af00c3fd81cebf8f7797f97204750ba99">&#9670;&nbsp;</a></span>MOTOR_TEMPERATURE_LOG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTOR_TEMPERATURE_LOG&#160;&#160;&#160;&quot;motor_temperature_log.csv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name for the motor temperature log. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00048">48</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="af7b33dd28efa07f171323d23a5f714d2" name="af7b33dd28efa07f171323d23a5f714d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7b33dd28efa07f171323d23a5f714d2">&#9670;&nbsp;</a></span>RPM_LOG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPM_LOG&#160;&#160;&#160;&quot;rpm_log.csv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name for the motor RPM log. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00060">60</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="a2665461802b5e24f2d0f9d8f1ca8351d" name="a2665461802b5e24f2d0f9d8f1ca8351d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2665461802b5e24f2d0f9d8f1ca8351d">&#9670;&nbsp;</a></span>THERMISTOR_LOG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THERMISTOR_LOG&#160;&#160;&#160;&quot;thermistor_log.csv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name for the thermistor temperature log. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00058">58</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ac2ad7f431e3446fddcd9b6b9f93c4c14" name="ac2ad7f431e3446fddcd9b6b9f93c4c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ad7f431e3446fddcd9b6b9f93c4c14">&#9670;&nbsp;</a></span>data_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_data_logging_8h.html#ac2ad7f431e3446fddcd9b6b9f93c4c14">data_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Basic enum for data types for logging. Nothing else really. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ac2ad7f431e3446fddcd9b6b9f93c4c14afd5a5f51ce25953f3db2c7e93eb7864a" name="ac2ad7f431e3446fddcd9b6b9f93c4c14afd5a5f51ce25953f3db2c7e93eb7864a"></a>INT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac2ad7f431e3446fddcd9b6b9f93c4c14a9cf4a0866224b0bb4a7a895da27c9c4c" name="ac2ad7f431e3446fddcd9b6b9f93c4c14a9cf4a0866224b0bb4a7a895da27c9c4c"></a>FLOAT&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00083">83</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa394fd0868d0e097f701cb3f21d9c451" name="aa394fd0868d0e097f701cb3f21d9c451"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa394fd0868d0e097f701cb3f21d9c451">&#9670;&nbsp;</a></span>addRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p ><a class="el" href="_data_logging_8ino.html#aa394fd0868d0e097f701cb3f21d9c451">addRecord()</a> adds a record to the data log with the included time in seconds since the recording has started. The data comes from the dataIn member (shared variable to other tasks) As of now it converts everything into a String and then prints it to the file.</p>
<dl class="section note"><dt>Note</dt><dd>NOTE: The function kinda works but should be redone later to use (void *) datatype instead of (float *). Then cast the (void *) to whatever datatype is given by D_TYPE Example: to print an int you would do</dd></dl>
<p>THIS IS BETTER VIEWED IN CODE THAN IN DOCUMENTATION... void *point = writer-&gt;dataValues; for(int i = 0; i &lt; writer-&gt;dataValuesLen) { switch(writer-&gt;D_TYPE) { case FLOAT: sRecord.concat(",").concat(writer-&gt;dataValues[i]); point += sizeof(float); // how much space the float took in memory break; case INT: sRecord.concat(",").concat(writer-&gt;dataValues[i]); point += sizeof(int); // how much space the int took in memory case ... (can be any other D_TYPE we define) ... (similar to previous two cases) break; default: Serial.printf("Unknown D_TYPE: %u\n", D_TYPE); break; } }</p>
<p ><br  />
 <br  />
</p>
<p >I want to add it in now but it should be tested before being merged obviously.. Chase</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00098">98</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a10c88f7cc0c34cd0a584f78997f13827" name="a10c88f7cc0c34cd0a584f78997f13827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10c88f7cc0c34cd0a584f78997f13827">&#9670;&nbsp;</a></span>closeFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void closeFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p ><a class="el" href="_data_logging_8ino.html#a10c88f7cc0c34cd0a584f78997f13827">closeFile()</a> closes the file inside the <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a></p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00070">70</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a24f7ab7e53619e5770ad9acc25b9b819" name="a24f7ab7e53619e5770ad9acc25b9b819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24f7ab7e53619e5770ad9acc25b9b819">&#9670;&nbsp;</a></span>dataLoggingTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dataLoggingTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dlData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The <a class="el" href="_data_logging_8ino.html#a24f7ab7e53619e5770ad9acc25b9b819">dataLoggingTask()</a> processes the data, for each of the logs. Just uses sdFat methods within the helper methods <a class="el" href="_data_logging_8ino.html#aa394fd0868d0e097f701cb3f21d9c451">addRecord()</a>, <a class="el" href="_data_logging_8ino.html#a52d8bf385131a3543793f22ee432100a">saveFiles()</a> as required to process the neatly organized <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> data and then save it.</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00030">30</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="ac579da51eca1f113da5d315ab23b8b1e" name="ac579da51eca1f113da5d315ab23b8b1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac579da51eca1f113da5d315ab23b8b1e">&#9670;&nbsp;</a></span>openFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool openFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p ><a class="el" href="_data_logging_8ino.html#ac579da51eca1f113da5d315ab23b8b1e">openFile()</a> attemps to open the file designated at the filename inside <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> Returns true if no errors, returns false if any error exists</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00063">63</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a8777416fb5b01666e7b28ada9f3b552a" name="a8777416fb5b01666e7b28ada9f3b552a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8777416fb5b01666e7b28ada9f3b552a">&#9670;&nbsp;</a></span>printFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Opens the file using <a class="el" href="_data_logging_8ino.html#ac579da51eca1f113da5d315ab23b8b1e">openFile()</a> and then prints out what is read in from the <a class="el" href="_data_logging_8ino.html#ac579da51eca1f113da5d315ab23b8b1e">openFile()</a> method to the Serial monitor</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00088">88</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a678245415389e1bbd75b088a980b008a" name="a678245415389e1bbd75b088a980b008a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678245415389e1bbd75b088a980b008a">&#9670;&nbsp;</a></span>saveFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void saveFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p ><a class="el" href="_data_logging_8ino.html#a678245415389e1bbd75b088a980b008a">saveFile()</a> saves the file inside the <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a></p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00075">75</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a52d8bf385131a3543793f22ee432100a" name="a52d8bf385131a3543793f22ee432100a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52d8bf385131a3543793f22ee432100a">&#9670;&nbsp;</a></span>saveFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void saveFiles </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> **&#160;</td>
          <td class="paramname"><em>writers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>writersLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p ><a class="el" href="_data_logging_8ino.html#a52d8bf385131a3543793f22ee432100a">saveFiles()</a> calls on <a class="el" href="_data_logging_8ino.html#a678245415389e1bbd75b088a980b008a">saveFile()</a> multiple times until all the files are saved.</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00080">80</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="ab91616c118b701c2afd9136393d1f19b" name="ab91616c118b701c2afd9136393d1f19b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab91616c118b701c2afd9136393d1f19b">&#9670;&nbsp;</a></span>startRecording()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startRecording </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p ><a class="el" href="_data_logging_8ino.html#ab91616c118b701c2afd9136393d1f19b">startRecording()</a> sets the "epoch" or beginning time so that each data log is synced up.</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00145">145</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a0d2a3a213399ec010b89dede4ba4de77" name="a0d2a3a213399ec010b89dede4ba4de77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d2a3a213399ec010b89dede4ba4de77">&#9670;&nbsp;</a></span>startSD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool startSD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p ><a class="el" href="_data_logging_8ino.html#a0d2a3a213399ec010b89dede4ba4de77">startSD()</a> attempts to begin communication with the SD card on SPI (single bit bus) Returns true if no errors exist, returns false if an error exists</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00057">57</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a888ed23a146630d5e36a08aed19ff638" name="a888ed23a146630d5e36a08aed19ff638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a888ed23a146630d5e36a08aed19ff638">&#9670;&nbsp;</a></span>BUF_DIM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const size_t BUF_DIM = 4096</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00072">72</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="a90b197693eeaad244ff381d5645b1c16" name="a90b197693eeaad244ff381d5645b1c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90b197693eeaad244ff381d5645b1c16">&#9670;&nbsp;</a></span>epochTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long epochTime</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents the time that recording started. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00078">78</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="a15e6b7e1f0fb2d1e0fe1654721bb5302" name="a15e6b7e1f0fb2d1e0fe1654721bb5302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e6b7e1f0fb2d1e0fe1654721bb5302">&#9670;&nbsp;</a></span>sd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SdFat sd</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents the serial connection to the sd card and any internal buffers. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00075">75</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
<a id="a587c91dc29e14d8227957fbe22af6f45" name="a587c91dc29e14d8227957fbe22af6f45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a587c91dc29e14d8227957fbe22af6f45">&#9670;&nbsp;</a></span>SD_CS_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t SD_CS_PIN = SS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use built-in SD for SPI modes on Teensy 3.5/3.6. </p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8h_source.html#l00066">66</a> of file <a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
