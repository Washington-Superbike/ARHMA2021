<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Superbike Firmware: C:/Users/ponym/ARHMA2021/Firmware/Main/DataLogging.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Superbike Firmware
   </div>
   <div id="projectbrief">Firmware for ARHMA Race 2023</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">C:/Users/ponym/ARHMA2021/Firmware/Main/DataLogging.ino File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="_data_logging_8ino.html" title="The DataLogging.ino file is used to excecute on the DataLogging task for the bike&#39;s firmware....">DataLogging.ino</a> file is used to excecute on the DataLogging task for the bike's firmware. This task uses the <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> data passed as logs to process and then save the data into files. There's not much else to it. Iterate over logs and save it.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_data_logging_8h_source.html">DataLogging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_display_8h_source.html">Display.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_main_8h_source.html">Main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_free_r_t_o_s___t_e_e_n_s_y4_8h_source.html">FreeRTOS_TEENSY4.h</a>&quot;</code><br />
</div>
<p><a href="_data_logging_8ino_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a24f7ab7e53619e5770ad9acc25b9b819"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#a24f7ab7e53619e5770ad9acc25b9b819">dataLoggingTask</a> (void *dlData)</td></tr>
<tr class="separator:a24f7ab7e53619e5770ad9acc25b9b819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2a3a213399ec010b89dede4ba4de77"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#a0d2a3a213399ec010b89dede4ba4de77">startSD</a> ()</td></tr>
<tr class="separator:a0d2a3a213399ec010b89dede4ba4de77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac579da51eca1f113da5d315ab23b8b1e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#ac579da51eca1f113da5d315ab23b8b1e">openFile</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer)</td></tr>
<tr class="separator:ac579da51eca1f113da5d315ab23b8b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c88f7cc0c34cd0a584f78997f13827"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#a10c88f7cc0c34cd0a584f78997f13827">closeFile</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer)</td></tr>
<tr class="separator:a10c88f7cc0c34cd0a584f78997f13827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678245415389e1bbd75b088a980b008a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#a678245415389e1bbd75b088a980b008a">saveFile</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer)</td></tr>
<tr class="separator:a678245415389e1bbd75b088a980b008a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52d8bf385131a3543793f22ee432100a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#a52d8bf385131a3543793f22ee432100a">saveFiles</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> **writers, int writersLen)</td></tr>
<tr class="separator:a52d8bf385131a3543793f22ee432100a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8777416fb5b01666e7b28ada9f3b552a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#a8777416fb5b01666e7b28ada9f3b552a">printFile</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer)</td></tr>
<tr class="separator:a8777416fb5b01666e7b28ada9f3b552a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa394fd0868d0e097f701cb3f21d9c451"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#aa394fd0868d0e097f701cb3f21d9c451">addRecord</a> (<a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *writer, int sTime)</td></tr>
<tr class="separator:aa394fd0868d0e097f701cb3f21d9c451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab91616c118b701c2afd9136393d1f19b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_data_logging_8ino.html#ab91616c118b701c2afd9136393d1f19b">startRecording</a> ()</td></tr>
<tr class="separator:ab91616c118b701c2afd9136393d1f19b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="_data_logging_8ino.html" title="The DataLogging.ino file is used to excecute on the DataLogging task for the bike&#39;s firmware....">DataLogging.ino</a> file is used to excecute on the DataLogging task for the bike's firmware. This task uses the <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> data passed as logs to process and then save the data into files. There's not much else to it. Iterate over logs and save it. </p>
<dl class="section author"><dt>Author</dt><dd>Washington Superbike </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1-March-2023 </dd></dl>
<dl class="section note"><dt>Note</dt><dd>All members should be able to use it without any trouble. Chase made a method to process the logs data without any trouble, but they be able to use it without any trouble.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Use the void pointer stuff in the addRecord method. Fix it up. Not required, but preferred. <br  />
 <br  />
 Goal 2. <br  />
 <br  />
 Goal 3. <br  />
 <br  />
 Final Goal. </dd></dl>

<p class="definition">Definition in file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa394fd0868d0e097f701cb3f21d9c451" name="aa394fd0868d0e097f701cb3f21d9c451"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa394fd0868d0e097f701cb3f21d9c451">&#9670;&#160;</a></span>addRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="_data_logging_8ino.html#aa394fd0868d0e097f701cb3f21d9c451">addRecord()</a> adds a record to the data log with the included time in seconds since the recording has started. The data comes from the dataIn member (shared variable to other tasks) As of now it converts everything into a String and then prints it to the file.</p>
<dl class="section note"><dt>Note</dt><dd>NOTE: The function kinda works but should be redone later to use (void *) datatype instead of (float *). Then cast the (void *) to whatever datatype is given by D_TYPE Example: to print an int you would do</dd></dl>
<p>THIS IS BETTER VIEWED IN CODE THAN IN DOCUMENTATION... void *point = writer-&gt;dataValues; for(int i = 0; i &lt; writer-&gt;dataValuesLen) { switch(writer-&gt;D_TYPE) { case FLOAT: sRecord.concat(",").concat(writer-&gt;dataValues[i]); point += sizeof(float); // how much space the float took in memory break; case INT: sRecord.concat(",").concat(writer-&gt;dataValues[i]); point += sizeof(int); // how much space the int took in memory case ... (can be any other D_TYPE we define) ... (similar to previous two cases) break; default: Serial.printf("Unknown D_TYPE: %u\n", D_TYPE); break; } }</p>
<p><br  />
 <br  />
</p>
<p>I want to add it in now but it should be tested before being merged obviously.. Chase</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00098">98</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a10c88f7cc0c34cd0a584f78997f13827" name="a10c88f7cc0c34cd0a584f78997f13827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10c88f7cc0c34cd0a584f78997f13827">&#9670;&#160;</a></span>closeFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void closeFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="_data_logging_8ino.html#a10c88f7cc0c34cd0a584f78997f13827">closeFile()</a> closes the file inside the <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a></p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00070">70</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a24f7ab7e53619e5770ad9acc25b9b819" name="a24f7ab7e53619e5770ad9acc25b9b819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24f7ab7e53619e5770ad9acc25b9b819">&#9670;&#160;</a></span>dataLoggingTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dataLoggingTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dlData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="_data_logging_8ino.html#a24f7ab7e53619e5770ad9acc25b9b819">dataLoggingTask()</a> processes the data, for each of the logs. Just uses sdFat methods within the helper methods <a class="el" href="_data_logging_8ino.html#aa394fd0868d0e097f701cb3f21d9c451">addRecord()</a>, <a class="el" href="_data_logging_8ino.html#a52d8bf385131a3543793f22ee432100a">saveFiles()</a> as required to process the neatly organized <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> data and then save it.</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00030">30</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="ac579da51eca1f113da5d315ab23b8b1e" name="ac579da51eca1f113da5d315ab23b8b1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac579da51eca1f113da5d315ab23b8b1e">&#9670;&#160;</a></span>openFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool openFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="_data_logging_8ino.html#ac579da51eca1f113da5d315ab23b8b1e">openFile()</a> attemps to open the file designated at the filename inside <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> Returns true if no errors, returns false if any error exists</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00063">63</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a8777416fb5b01666e7b28ada9f3b552a" name="a8777416fb5b01666e7b28ada9f3b552a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8777416fb5b01666e7b28ada9f3b552a">&#9670;&#160;</a></span>printFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens the file using <a class="el" href="_data_logging_8ino.html#ac579da51eca1f113da5d315ab23b8b1e">openFile()</a> and then prints out what is read in from the <a class="el" href="_data_logging_8ino.html#ac579da51eca1f113da5d315ab23b8b1e">openFile()</a> method to the Serial monitor</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00088">88</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a678245415389e1bbd75b088a980b008a" name="a678245415389e1bbd75b088a980b008a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678245415389e1bbd75b088a980b008a">&#9670;&#160;</a></span>saveFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void saveFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="_data_logging_8ino.html#a678245415389e1bbd75b088a980b008a">saveFile()</a> saves the file inside the <a class="el" href="struct_c_s_v_writer.html">CSVWriter</a></p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00075">75</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a52d8bf385131a3543793f22ee432100a" name="a52d8bf385131a3543793f22ee432100a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52d8bf385131a3543793f22ee432100a">&#9670;&#160;</a></span>saveFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void saveFiles </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_v_writer.html">CSVWriter</a> **&#160;</td>
          <td class="paramname"><em>writers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>writersLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="_data_logging_8ino.html#a52d8bf385131a3543793f22ee432100a">saveFiles()</a> calls on <a class="el" href="_data_logging_8ino.html#a678245415389e1bbd75b088a980b008a">saveFile()</a> multiple times until all the files are saved.</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00080">80</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="ab91616c118b701c2afd9136393d1f19b" name="ab91616c118b701c2afd9136393d1f19b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab91616c118b701c2afd9136393d1f19b">&#9670;&#160;</a></span>startRecording()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startRecording </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="_data_logging_8ino.html#ab91616c118b701c2afd9136393d1f19b">startRecording()</a> sets the "epoch" or beginning time so that each data log is synced up.</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00145">145</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
<a id="a0d2a3a213399ec010b89dede4ba4de77" name="a0d2a3a213399ec010b89dede4ba4de77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d2a3a213399ec010b89dede4ba4de77">&#9670;&#160;</a></span>startSD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool startSD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="_data_logging_8ino.html#a0d2a3a213399ec010b89dede4ba4de77">startSD()</a> attempts to begin communication with the SD card on SPI (single bit bus) Returns true if no errors exist, returns false if an error exists</p>

<p class="definition">Definition at line <a class="el" href="_data_logging_8ino_source.html#l00057">57</a> of file <a class="el" href="_data_logging_8ino_source.html">DataLogging.ino</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
