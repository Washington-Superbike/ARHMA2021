<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Superbike Firmware: C:/Users/ponym/ARHMA2021/Firmware/Main/Display.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Superbike Firmware
   </div>
   <div id="projectbrief">Firmware for ARHMA Race 2023</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">C:/Users/ponym/ARHMA2021/Firmware/Main/Display.ino File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="_display_8ino.html" title="The Display.ino file executes the Display task for the bike&#39;s firmware. This calls on the variables t...">Display.ino</a> file executes the Display task for the bike's firmware. This calls on the variables that are initialized in <a class="el" href="_display_8h.html" title="The Display.h config file for the Display task for the bike&#39;s firmware. This defines the variables th...">Display.h</a> and then calls on various methods from the ILI9341's adafruit display library to update the display. Updating the display includes comparing old and new data to ensure data has changed, erasing the previous data if it's changed and writing in the new data.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_display_8h_source.html">Display.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_main_8h_source.html">Main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_free_r_t_o_s___t_e_e_n_s_y4_8h_source.html">FreeRTOS_TEENSY4.h</a>&quot;</code><br />
</div>
<p><a href="_display_8ino_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7121972a969d5d8bd9c96626cfd61b11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#a7121972a969d5d8bd9c96626cfd61b11">displayTask</a> (void *measurementDataPtr)</td></tr>
<tr class="separator:a7121972a969d5d8bd9c96626cfd61b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b84de3ddc4f88db07ac708452e4467"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#a79b84de3ddc4f88db07ac708452e4467">setupDisplay</a> (<a class="el" href="_display_8h.html#a2dded6e25e0cb307491fd7997b66b2a4">MeasurementScreenData</a> msData)</td></tr>
<tr class="separator:a79b84de3ddc4f88db07ac708452e4467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af0d27bbe0bf5e4e4b8207139104c78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#a2af0d27bbe0bf5e4e4b8207139104c78">displayUpdate</a> (<a class="el" href="_display_8h.html#a2dded6e25e0cb307491fd7997b66b2a4">MeasurementScreenData</a> msData)</td></tr>
<tr class="separator:a2af0d27bbe0bf5e4e4b8207139104c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255d71bb7f36b2056059bd579af11f3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#a255d71bb7f36b2056059bd579af11f3a">thermiDataPrint</a> (int numberOfLines)</td></tr>
<tr class="separator:a255d71bb7f36b2056059bd579af11f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1faaa02c20faaddf6f9e78859eb3cb0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#a1faaa02c20faaddf6f9e78859eb3cb0c">timePrint</a> ()</td></tr>
<tr class="separator:a1faaa02c20faaddf6f9e78859eb3cb0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5303e677c439d26296656ed10d656cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#ae5303e677c439d26296656ed10d656cc">setupMeasurementScreen</a> ()</td></tr>
<tr class="separator:ae5303e677c439d26296656ed10d656cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9622e737a6a548ba9f9ffcbb6ed1bb2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#a9622e737a6a548ba9f9ffcbb6ed1bb2d">eraseThenPrint</a> (int xPos, int yPos, String oldData, String newData)</td></tr>
<tr class="separator:a9622e737a6a548ba9f9ffcbb6ed1bb2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fcaba5d0c64fb3389132dca04224211"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#a2fcaba5d0c64fb3389132dca04224211">manualScreenDataUpdater</a> ()</td></tr>
<tr class="separator:a2fcaba5d0c64fb3389132dca04224211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad609934bdce8f8169cc609cb7913f507"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_display_8ino.html#ad609934bdce8f8169cc609cb7913f507">aux_voltage_read</a> ()</td></tr>
<tr class="separator:ad609934bdce8f8169cc609cb7913f507"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="_display_8ino.html" title="The Display.ino file executes the Display task for the bike&#39;s firmware. This calls on the variables t...">Display.ino</a> file executes the Display task for the bike's firmware. This calls on the variables that are initialized in <a class="el" href="_display_8h.html" title="The Display.h config file for the Display task for the bike&#39;s firmware. This defines the variables th...">Display.h</a> and then calls on various methods from the ILI9341's adafruit display library to update the display. Updating the display includes comparing old and new data to ensure data has changed, erasing the previous data if it's changed and writing in the new data. </p>
<dl class="section author"><dt>Author</dt><dd>Washington Superbike </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1-March-2023 </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This works. Display does slow down a bit in the speedometer screen, but that is also due to often the numbers were changing in the <a class="el" href="_display_8ino.html#a2fcaba5d0c64fb3389132dca04224211">manualScreenDataUpdater()</a>method updating data too frequently. Just consider reducing the size of the text in case it looks like it is updating too slowly at speeds of ~60-80 mph.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>Remove all unused vars and tighten up methods. <br  />
 <br  />
 There are WAY more macros (#define statements) that need to be written for defining some frequently used values in display. Can't think of them off the top of my head, but make and use those. <br  />
 <br  />
 In the speedometer screen, add code to show angles. If the angle is near the threshold (&gt; ~30 degrees), show it in red. If the angle is near safe (&lt; ~30 degrees), show it in green. Add an indicator that prints out preCharge statuses This variable is called hv_state in <a class="el" href="_precharge_8h.html" title="The PreCharge.h config file for the PreCharge/Controls task for the bike&#39;s firmware....">preCharge.h</a> basically print out this variable if possbie. This is similar to how cars print out engine flags, etc. </dd></dl>

<p class="definition">Definition in file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad609934bdce8f8169cc609cb7913f507" name="ad609934bdce8f8169cc609cb7913f507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad609934bdce8f8169cc609cb7913f507">&#9670;&#160;</a></span>aux_voltage_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float aux_voltage_read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads in the aux_voltage of the LV system and reads in the values. Would be better in CAN, but alas Chase said leave it here, it's here.</p>

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00240">240</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
<a id="a7121972a969d5d8bd9c96626cfd61b11" name="a7121972a969d5d8bd9c96626cfd61b11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7121972a969d5d8bd9c96626cfd61b11">&#9670;&#160;</a></span>displayTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>measurementDataPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parses the data from the void pointer to be processable? Idk if that's word. Passes the measurementScreenData to the <a class="el" href="_display_8ino.html#a2af0d27bbe0bf5e4e4b8207139104c78">displayUpdate()</a> method. The <a class="el" href="_display_8ino.html#a2af0d27bbe0bf5e4e4b8207139104c78">displayUpdate()</a> method then processes it and updates the screen accordingly.</p>

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00038">38</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
<a id="a2af0d27bbe0bf5e4e4b8207139104c78" name="a2af0d27bbe0bf5e4e4b8207139104c78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af0d27bbe0bf5e4e4b8207139104c78">&#9670;&#160;</a></span>displayUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_display_8h.html#a2dded6e25e0cb307491fd7997b66b2a4">MeasurementScreenData</a>&#160;</td>
          <td class="paramname"><em>msData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00084">84</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
<a id="a9622e737a6a548ba9f9ffcbb6ed1bb2d" name="a9622e737a6a548ba9f9ffcbb6ed1bb2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9622e737a6a548ba9f9ffcbb6ed1bb2d">&#9670;&#160;</a></span>eraseThenPrint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eraseThenPrint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>yPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>oldData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>newData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Erases the old value using the oldData parameter by writing it in the background color and then setting it back to the printing color to write the newData.</p>

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00208">208</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
<a id="a2fcaba5d0c64fb3389132dca04224211" name="a2fcaba5d0c64fb3389132dca04224211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fcaba5d0c64fb3389132dca04224211">&#9670;&#160;</a></span>manualScreenDataUpdater()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void manualScreenDataUpdater </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Iterates through all the printedVals array and then does += 1 to make sure it's increasing. This change should be reflected in the display itself.</p>

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00225">225</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
<a id="a79b84de3ddc4f88db07ac708452e4467" name="a79b84de3ddc4f88db07ac708452e4467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79b84de3ddc4f88db07ac708452e4467">&#9670;&#160;</a></span>setupDisplay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setupDisplay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_display_8h.html#a2dded6e25e0cb307491fd7997b66b2a4">MeasurementScreenData</a>&#160;</td>
          <td class="paramname"><em>msData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calls on tft.begin() method and sets the orientation using tft.setRotatio() and also sets the screen to ILI9341_WHITE or ILI9341_BLACK based on Debugging or Speedometer screen.</p>
<p>Initializes all the PrintedDataStructs to set their position, values, and point to the correct pointer corresponding to the correct data.</p>
<p>Calls on the <a class="el" href="_display_8ino.html#ae5303e677c439d26296656ed10d656cc">setupMeasurementScreen()</a> to finish up the setup.</p>

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00051">51</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
<a id="ae5303e677c439d26296656ed10d656cc" name="ae5303e677c439d26296656ed10d656cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5303e677c439d26296656ed10d656cc">&#9670;&#160;</a></span>setupMeasurementScreen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setupMeasurementScreen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If the screen is debugging type, it will print out all the data labels in their data locations as a black text This is achieved using a bunch of tft methods. Nice.</p>
<p>If the screen is speedometer type, it will print out all the data labels in their locations (SPEED up top and RPM at the bottom). This is achieved using a bunch of tft methods. Nice.</p>

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00171">171</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
<a id="a255d71bb7f36b2056059bd579af11f3a" name="a255d71bb7f36b2056059bd579af11f3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255d71bb7f36b2056059bd579af11f3a">&#9670;&#160;</a></span>thermiDataPrint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thermiDataPrint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numberOfLines</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00130">130</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
<a id="a1faaa02c20faaddf6f9e78859eb3cb0c" name="a1faaa02c20faaddf6f9e78859eb3cb0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1faaa02c20faaddf6f9e78859eb3cb0c">&#9670;&#160;</a></span>timePrint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timePrint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_display_8ino_source.html#l00160">160</a> of file <a class="el" href="_display_8ino_source.html">Display.ino</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
