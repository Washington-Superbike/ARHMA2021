<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Superbike Firmware: Precharge.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Superbike Firmware
   </div>
   <div id="projectbrief">Firmware for ARHMA Race 2023</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Precharge.h</div></div>
</div><!--header-->
<div class="contents">
<a href="_precharge_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#ifndef _PRECHARGE_H_</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#define _PRECHARGE_H_</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="_free_r_t_o_s___t_e_e_n_s_y4_8h.html">FreeRTOS_TEENSY4.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a0ea5dd53294d533feaeeb8731cb9739a">   32</a></span><span class="preprocessor">#define PRECHARGE_TASK_STACK_SIZE configMINIMAL_STACK_SIZE + 4096</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="_precharge_8h.html#ae1099ac76283225ff2bbbbdc0819ba4e">   34</a></span><span class="preprocessor">#define CONTACTOR 16 </span><span class="comment">//digital pin for contactor control (closing or opening)</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a093dd273c900bae9cba2b32149e30eaa">   35</a></span><span class="preprocessor">#define PRECHARGE 17 </span><span class="comment">//digital pin for relay in series with precharge resistor</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a4e1dc017df18faad4234012c3e88d2f6">   36</a></span><span class="preprocessor">#define HIGH_VOLTAGE_TOGGLE 15   </span><span class="comment">// digital pin for starting precharge, exit precharging, exit done-precharging</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a6f82f95bb8a6ffac8f6998ff4e5e16ec">   37</a></span><span class="preprocessor">#define CLOSE_CONTACTOR_BUTTON 14 </span><span class="comment">// digital pin for closing the contactor (usable after precharging)</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a0985e25d7f0cd7e7101c2f20c1cf8e02">   38</a></span><span class="preprocessor">#define CONTACTOR_PRECHARGED_LED 18 </span><span class="comment">// digital pin for LED that illuminates after precharge complete</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a606b28f262c8b6842a36e2f68cfc327a">   39</a></span><span class="preprocessor">#define CONTACTOR_CLOSED_LED 19 </span><span class="comment">// digital pin for LED that illuminates when the contactor is closed</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a3d7443dc1d0d423a961f907584dfd19e">   40</a></span><span class="preprocessor">#define NUMBER_OF_LTCS 20 </span><span class="comment">// THIS NEEDS TO BE CHANGED TO OUR ACTUAL NUMBER OF LTCs</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a1f9513787cfe256aae379719ab26ca39">   41</a></span><span class="preprocessor">#define MOTORCONTROLLER_TEMP_MAX 65 </span><span class="comment">// THIS ALSO MAY NEED TO BE CHANGED</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="_precharge_8h.html#aa39f17be3d8f2f799f7fbd0dc01963db">   42</a></span><span class="preprocessor">#define MOTOR_TEMP_MAX 80</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29a2303713b8a2ce365abb6b0de95c38595">   44</a></span><span class="keyword">enum</span> <a class="code hl_enumeration" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29">HV_STATE</a> {<a class="code hl_enumvalue" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29abc9f85ed087d13faf9b1c463431ee66a">HV_OFF</a> , <a class="code hl_enumvalue" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29a2da9fa3988c31a60d94ee2a751ba32ce">HV_PRECHARGING</a>, <a class="code hl_enumvalue" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29ab5febf14562b68ff6bdaaa86ec9b5dec">HV_ON</a>, <a class="code hl_enumvalue" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29a2303713b8a2ce365abb6b0de95c38595">HV_ERROR</a>};</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html">   46</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a0dff65dcdc2df79dddc5bcf2ff491c2d">   47</a></span>  <a class="code hl_struct" href="struct_b_m_s_status.html">BMSStatus</a> <a class="code hl_variable" href="struct_pre_charge_task_data.html#a0dff65dcdc2df79dddc5bcf2ff491c2d">bmsStatus</a>;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a3e8e3c4386b66dbf1011082b1f8ce7aa">   48</a></span>  <a class="code hl_struct" href="struct_motor_temps.html">MotorTemps</a> <a class="code hl_variable" href="struct_pre_charge_task_data.html#a3e8e3c4386b66dbf1011082b1f8ce7aa">motorTemps</a>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#afdfc29c3040101593d7d298c7b432132">   49</a></span>  <a class="code hl_struct" href="struct_cell_voltages.html">CellVoltages</a> <a class="code hl_variable" href="struct_pre_charge_task_data.html#afdfc29c3040101593d7d298c7b432132">cellVoltages</a>; <span class="comment">// from the main accumulator</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#aae4496a1b8d72f6107bdfcf81472741b">   50</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#aae4496a1b8d72f6107bdfcf81472741b">motorControllerBatteryVoltage</a>;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a53289d52f48c067285cb843ef7470c9a">   51</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a53289d52f48c067285cb843ef7470c9a">angle_X</a>;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a7a48fc6887285d4cb55bff65fca23f36">   52</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a7a48fc6887285d4cb55bff65fca23f36">angle_Y</a>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a33b675970bf11d7e27edf3b542431997">   53</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a33b675970bf11d7e27edf3b542431997">RateRoll</a>;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#afc133d30f22f7a7f72ee498b3d69be82">   54</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#afc133d30f22f7a7f72ee498b3d69be82">RatePitch</a>;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#aaf5cdfb5b1dd1857d4082f3a014ffb51">   55</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#aaf5cdfb5b1dd1857d4082f3a014ffb51">RateYaw</a>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a4d7799e4a73f6488e3296c35f66c2e30">   57</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a4d7799e4a73f6488e3296c35f66c2e30">RateCalibrationRoll</a>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a80f6f899a8c9d6b3e7850f52350a414d">   58</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a80f6f899a8c9d6b3e7850f52350a414d">RateCalibrationPitch</a>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#aa0d6bb3b938787ae1de06d67d1e3deaf">   59</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#aa0d6bb3b938787ae1de06d67d1e3deaf">RateCalibrationYaw</a>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#ab12a4f264d6acfdf84ce67728ecb42b2">   61</a></span>  <span class="keywordtype">int</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#ab12a4f264d6acfdf84ce67728ecb42b2">RateCalibrationNumber</a>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a3c051d79159770c924eda82743ba8d81">   62</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a3c051d79159770c924eda82743ba8d81">AccX</a>;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a80f0e6e50839ffb0fc6d04cd3d871a3f">   63</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a80f0e6e50839ffb0fc6d04cd3d871a3f">AccY</a>;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a3bb9585d2c3e9ee02ed1f98f706426b3">   64</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a3bb9585d2c3e9ee02ed1f98f706426b3">AccZ</a>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a99d4f80bc2e399c388039183debf146a">   65</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a99d4f80bc2e399c388039183debf146a">AngleRoll</a>;</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a4bb0f04e326928d80e286b279ca81003">   66</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a4bb0f04e326928d80e286b279ca81003">AnglePitch</a>;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a6710c3c13016f4d3127232fce1782ad2">   68</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a6710c3c13016f4d3127232fce1782ad2">KalmanAngleRoll</a>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a56b12f35d375a77d39a5067b35701ec6">   69</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a56b12f35d375a77d39a5067b35701ec6">KalmanUncertaintyAngleRoll</a>;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a21d75327dbefd085bb4e809b589e0dec">   70</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a21d75327dbefd085bb4e809b589e0dec">KalmanAnglePitch</a>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a87db2a0a7add2863f02e490544f937b2">   71</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a87db2a0a7add2863f02e490544f937b2">KalmanUncertaintyAnglePitch</a>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="struct_pre_charge_task_data.html#a4ca4aeeb66f8fa86b2b33287d78f8174">   72</a></span>  <span class="keywordtype">float</span>* <a class="code hl_variable" href="struct_pre_charge_task_data.html#a4ca4aeeb66f8fa86b2b33287d78f8174">Kalman1DOutput</a>;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>} <a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a>;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a5c9b1f4b5a31b5d46c45310567595867">   75</a></span><a class="code hl_enumeration" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29">HV_STATE</a> <a class="code hl_variable" href="_precharge_8h.html#a5c9b1f4b5a31b5d46c45310567595867">hv_state</a> = <a class="code hl_enumvalue" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29abc9f85ed087d13faf9b1c463431ee66a">HV_OFF</a>;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="_precharge_8h.html#a3a618d104e1f329b2aad074b706db5c9">   77</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="_precharge_8h.html#a3a618d104e1f329b2aad074b706db5c9">preChargeTask</a>(<span class="keywordtype">void</span> *taskData);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="keywordtype">void</span> <a class="code hl_function" href="_precharge_8h.html#ad5e3efaa785dcd1d9143ec7e5d117277">preChargeCircuitFSMTransitions</a> (<a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a> <a class="code hl_variable" href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a>);</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="keywordtype">void</span> <a class="code hl_function" href="_precharge_8h.html#ad2376a25ab645f00587791af3c89968e">preChargeCircuitFSMStateActions</a> (<a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a> <a class="code hl_variable" href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a>);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="keywordtype">bool</span> <a class="code hl_function" href="_precharge_8h.html#a42b25fa6ccd2c8d82ba24c5ed4aaa7d1">isPrecharged</a>(<a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a> <a class="code hl_variable" href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a>);</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="keywordtype">bool</span> <a class="code hl_function" href="_precharge_8h.html#a65867cb936f7ef47ffd07fbfd4a91355">isHVSafe</a>(<a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a> <a class="code hl_variable" href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a>);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="keywordtype">bool</span> <a class="code hl_function" href="_precharge_8h.html#a6798f4bd0a5b6353886f894b38b32473">check_HV_TOGGLE</a>();</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="keywordtype">char</span>* <a class="code hl_function" href="_precharge_8h.html#a0a3e1d4e80c1320d3308a0e0bb10ac87">state_name</a>(<a class="code hl_enumeration" href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29">HV_STATE</a> state);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">// I2C Accelerometer/Gyroscope access methods</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="keywordtype">void</span> <a class="code hl_function" href="_precharge_8h.html#a5782bd590f95fb2269eb43a3d70c18f4">setupI2C</a>(<a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a> <a class="code hl_variable" href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a>);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="keywordtype">void</span> <a class="code hl_function" href="_precharge_8h.html#ad8511ef84de5112bd6beb8e3ac5fff67">gyro_signals</a>(<a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a> <a class="code hl_variable" href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a>);</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="keywordtype">void</span> <a class="code hl_function" href="_precharge_8h.html#a87184d718be6821c71e697fc1fd98d3b">updateGyroData</a>(<a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a> <a class="code hl_variable" href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a>);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="keywordtype">void</span> <a class="code hl_function" href="_precharge_8h.html#ade8f654468b951602d2622b34902944f">kalman_1d</a>(<span class="keywordtype">float</span> KalmanState, <span class="keywordtype">float</span> KalmanUncertainty, <span class="keywordtype">float</span> KalmanInput, <span class="keywordtype">float</span> KalmanMeasurement, <a class="code hl_struct" href="struct_pre_charge_task_data.html">PreChargeTaskData</a> <a class="code hl_variable" href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a>);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="preprocessor">#endif </span><span class="comment">// _PRECHARGE_H</span></div>
<div class="ttc" id="a_free_r_t_o_s___t_e_e_n_s_y4_8h_html"><div class="ttname"><a href="_free_r_t_o_s___t_e_e_n_s_y4_8h.html">FreeRTOS_TEENSY4.h</a></div><div class="ttdoc">FreeRTOS for Teensy 4.0.</div></div>
<div class="ttc" id="a_main_8h_html_a695dccac97a0f45cf570237e981b2b5d"><div class="ttname"><a href="_main_8h.html#a695dccac97a0f45cf570237e981b2b5d">preChargeData</a></div><div class="ttdeci">static PreChargeTaskData preChargeData</div><div class="ttdoc">An instance of a struct to store all preCharge data, then pass it as a void pointer.</div><div class="ttdef"><b>Definition:</b> <a href="_main_8h_source.html#l00212">Main.h:212</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a0a3e1d4e80c1320d3308a0e0bb10ac87"><div class="ttname"><a href="_precharge_8h.html#a0a3e1d4e80c1320d3308a0e0bb10ac87">state_name</a></div><div class="ttdeci">char * state_name(HV_STATE state)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00194">PreCharge.ino:194</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a3a618d104e1f329b2aad074b706db5c9"><div class="ttname"><a href="_precharge_8h.html#a3a618d104e1f329b2aad074b706db5c9">preChargeTask</a></div><div class="ttdeci">void preChargeTask(void *taskData)</div></div>
<div class="ttc" id="a_precharge_8h_html_a42b25fa6ccd2c8d82ba24c5ed4aaa7d1"><div class="ttname"><a href="_precharge_8h.html#a42b25fa6ccd2c8d82ba24c5ed4aaa7d1">isPrecharged</a></div><div class="ttdeci">bool isPrecharged(PreChargeTaskData preChargeData)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00154">PreCharge.ino:154</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a5782bd590f95fb2269eb43a3d70c18f4"><div class="ttname"><a href="_precharge_8h.html#a5782bd590f95fb2269eb43a3d70c18f4">setupI2C</a></div><div class="ttdeci">void setupI2C(PreChargeTaskData preChargeData)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00203">PreCharge.ino:203</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a5c9b1f4b5a31b5d46c45310567595867"><div class="ttname"><a href="_precharge_8h.html#a5c9b1f4b5a31b5d46c45310567595867">hv_state</a></div><div class="ttdeci">HV_STATE hv_state</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00075">Precharge.h:75</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a5faacefaff4b0ce77f1f8be0bf2aaf29"><div class="ttname"><a href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29">HV_STATE</a></div><div class="ttdeci">HV_STATE</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00044">Precharge.h:44</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a5faacefaff4b0ce77f1f8be0bf2aaf29a2303713b8a2ce365abb6b0de95c38595"><div class="ttname"><a href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29a2303713b8a2ce365abb6b0de95c38595">HV_ERROR</a></div><div class="ttdeci">@ HV_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00044">Precharge.h:44</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a5faacefaff4b0ce77f1f8be0bf2aaf29a2da9fa3988c31a60d94ee2a751ba32ce"><div class="ttname"><a href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29a2da9fa3988c31a60d94ee2a751ba32ce">HV_PRECHARGING</a></div><div class="ttdeci">@ HV_PRECHARGING</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00044">Precharge.h:44</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a5faacefaff4b0ce77f1f8be0bf2aaf29ab5febf14562b68ff6bdaaa86ec9b5dec"><div class="ttname"><a href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29ab5febf14562b68ff6bdaaa86ec9b5dec">HV_ON</a></div><div class="ttdeci">@ HV_ON</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00044">Precharge.h:44</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a5faacefaff4b0ce77f1f8be0bf2aaf29abc9f85ed087d13faf9b1c463431ee66a"><div class="ttname"><a href="_precharge_8h.html#a5faacefaff4b0ce77f1f8be0bf2aaf29abc9f85ed087d13faf9b1c463431ee66a">HV_OFF</a></div><div class="ttdeci">@ HV_OFF</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00044">Precharge.h:44</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a65867cb936f7ef47ffd07fbfd4a91355"><div class="ttname"><a href="_precharge_8h.html#a65867cb936f7ef47ffd07fbfd4a91355">isHVSafe</a></div><div class="ttdeci">bool isHVSafe(PreChargeTaskData preChargeData)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00169">PreCharge.ino:169</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a6798f4bd0a5b6353886f894b38b32473"><div class="ttname"><a href="_precharge_8h.html#a6798f4bd0a5b6353886f894b38b32473">check_HV_TOGGLE</a></div><div class="ttdeci">bool check_HV_TOGGLE()</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00190">PreCharge.ino:190</a></div></div>
<div class="ttc" id="a_precharge_8h_html_a87184d718be6821c71e697fc1fd98d3b"><div class="ttname"><a href="_precharge_8h.html#a87184d718be6821c71e697fc1fd98d3b">updateGyroData</a></div><div class="ttdeci">void updateGyroData(PreChargeTaskData preChargeData)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00299">PreCharge.ino:299</a></div></div>
<div class="ttc" id="a_precharge_8h_html_ad2376a25ab645f00587791af3c89968e"><div class="ttname"><a href="_precharge_8h.html#ad2376a25ab645f00587791af3c89968e">preChargeCircuitFSMStateActions</a></div><div class="ttdeci">void preChargeCircuitFSMStateActions(PreChargeTaskData preChargeData)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00130">PreCharge.ino:130</a></div></div>
<div class="ttc" id="a_precharge_8h_html_ad5e3efaa785dcd1d9143ec7e5d117277"><div class="ttname"><a href="_precharge_8h.html#ad5e3efaa785dcd1d9143ec7e5d117277">preChargeCircuitFSMTransitions</a></div><div class="ttdeci">void preChargeCircuitFSMTransitions(PreChargeTaskData preChargeData)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00070">PreCharge.ino:70</a></div></div>
<div class="ttc" id="a_precharge_8h_html_ad8511ef84de5112bd6beb8e3ac5fff67"><div class="ttname"><a href="_precharge_8h.html#ad8511ef84de5112bd6beb8e3ac5fff67">gyro_signals</a></div><div class="ttdeci">void gyro_signals(PreChargeTaskData preChargeData)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00232">PreCharge.ino:232</a></div></div>
<div class="ttc" id="a_precharge_8h_html_ade8f654468b951602d2622b34902944f"><div class="ttname"><a href="_precharge_8h.html#ade8f654468b951602d2622b34902944f">kalman_1d</a></div><div class="ttdeci">void kalman_1d(float KalmanState, float KalmanUncertainty, float KalmanInput, float KalmanMeasurement, PreChargeTaskData preChargeData)</div><div class="ttdef"><b>Definition:</b> <a href="_pre_charge_8ino_source.html#l00321">PreCharge.ino:321</a></div></div>
<div class="ttc" id="astruct_b_m_s_status_html"><div class="ttname"><a href="struct_b_m_s_status.html">BMSStatus</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_a_n_8h_source.html#l00092">CAN.h:92</a></div></div>
<div class="ttc" id="astruct_cell_voltages_html"><div class="ttname"><a href="struct_cell_voltages.html">CellVoltages</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_a_n_8h_source.html#l00104">CAN.h:104</a></div></div>
<div class="ttc" id="astruct_motor_temps_html"><div class="ttname"><a href="struct_motor_temps.html">MotorTemps</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_a_n_8h_source.html#l00071">CAN.h:71</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html"><div class="ttname"><a href="struct_pre_charge_task_data.html">PreChargeTaskData</a></div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00046">Precharge.h:46</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a0dff65dcdc2df79dddc5bcf2ff491c2d"><div class="ttname"><a href="struct_pre_charge_task_data.html#a0dff65dcdc2df79dddc5bcf2ff491c2d">PreChargeTaskData::bmsStatus</a></div><div class="ttdeci">BMSStatus bmsStatus</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00047">Precharge.h:47</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a21d75327dbefd085bb4e809b589e0dec"><div class="ttname"><a href="struct_pre_charge_task_data.html#a21d75327dbefd085bb4e809b589e0dec">PreChargeTaskData::KalmanAnglePitch</a></div><div class="ttdeci">float * KalmanAnglePitch</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00070">Precharge.h:70</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a33b675970bf11d7e27edf3b542431997"><div class="ttname"><a href="struct_pre_charge_task_data.html#a33b675970bf11d7e27edf3b542431997">PreChargeTaskData::RateRoll</a></div><div class="ttdeci">float * RateRoll</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00053">Precharge.h:53</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a3bb9585d2c3e9ee02ed1f98f706426b3"><div class="ttname"><a href="struct_pre_charge_task_data.html#a3bb9585d2c3e9ee02ed1f98f706426b3">PreChargeTaskData::AccZ</a></div><div class="ttdeci">float * AccZ</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00064">Precharge.h:64</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a3c051d79159770c924eda82743ba8d81"><div class="ttname"><a href="struct_pre_charge_task_data.html#a3c051d79159770c924eda82743ba8d81">PreChargeTaskData::AccX</a></div><div class="ttdeci">float * AccX</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00062">Precharge.h:62</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a3e8e3c4386b66dbf1011082b1f8ce7aa"><div class="ttname"><a href="struct_pre_charge_task_data.html#a3e8e3c4386b66dbf1011082b1f8ce7aa">PreChargeTaskData::motorTemps</a></div><div class="ttdeci">MotorTemps motorTemps</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00048">Precharge.h:48</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a4bb0f04e326928d80e286b279ca81003"><div class="ttname"><a href="struct_pre_charge_task_data.html#a4bb0f04e326928d80e286b279ca81003">PreChargeTaskData::AnglePitch</a></div><div class="ttdeci">float * AnglePitch</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00066">Precharge.h:66</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a4ca4aeeb66f8fa86b2b33287d78f8174"><div class="ttname"><a href="struct_pre_charge_task_data.html#a4ca4aeeb66f8fa86b2b33287d78f8174">PreChargeTaskData::Kalman1DOutput</a></div><div class="ttdeci">float * Kalman1DOutput</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00072">Precharge.h:72</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a4d7799e4a73f6488e3296c35f66c2e30"><div class="ttname"><a href="struct_pre_charge_task_data.html#a4d7799e4a73f6488e3296c35f66c2e30">PreChargeTaskData::RateCalibrationRoll</a></div><div class="ttdeci">float * RateCalibrationRoll</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00057">Precharge.h:57</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a53289d52f48c067285cb843ef7470c9a"><div class="ttname"><a href="struct_pre_charge_task_data.html#a53289d52f48c067285cb843ef7470c9a">PreChargeTaskData::angle_X</a></div><div class="ttdeci">float * angle_X</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00051">Precharge.h:51</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a56b12f35d375a77d39a5067b35701ec6"><div class="ttname"><a href="struct_pre_charge_task_data.html#a56b12f35d375a77d39a5067b35701ec6">PreChargeTaskData::KalmanUncertaintyAngleRoll</a></div><div class="ttdeci">float * KalmanUncertaintyAngleRoll</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00069">Precharge.h:69</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a6710c3c13016f4d3127232fce1782ad2"><div class="ttname"><a href="struct_pre_charge_task_data.html#a6710c3c13016f4d3127232fce1782ad2">PreChargeTaskData::KalmanAngleRoll</a></div><div class="ttdeci">float * KalmanAngleRoll</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00068">Precharge.h:68</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a7a48fc6887285d4cb55bff65fca23f36"><div class="ttname"><a href="struct_pre_charge_task_data.html#a7a48fc6887285d4cb55bff65fca23f36">PreChargeTaskData::angle_Y</a></div><div class="ttdeci">float * angle_Y</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00052">Precharge.h:52</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a80f0e6e50839ffb0fc6d04cd3d871a3f"><div class="ttname"><a href="struct_pre_charge_task_data.html#a80f0e6e50839ffb0fc6d04cd3d871a3f">PreChargeTaskData::AccY</a></div><div class="ttdeci">float * AccY</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00063">Precharge.h:63</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a80f6f899a8c9d6b3e7850f52350a414d"><div class="ttname"><a href="struct_pre_charge_task_data.html#a80f6f899a8c9d6b3e7850f52350a414d">PreChargeTaskData::RateCalibrationPitch</a></div><div class="ttdeci">float * RateCalibrationPitch</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00058">Precharge.h:58</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a87db2a0a7add2863f02e490544f937b2"><div class="ttname"><a href="struct_pre_charge_task_data.html#a87db2a0a7add2863f02e490544f937b2">PreChargeTaskData::KalmanUncertaintyAnglePitch</a></div><div class="ttdeci">float * KalmanUncertaintyAnglePitch</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00071">Precharge.h:71</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_a99d4f80bc2e399c388039183debf146a"><div class="ttname"><a href="struct_pre_charge_task_data.html#a99d4f80bc2e399c388039183debf146a">PreChargeTaskData::AngleRoll</a></div><div class="ttdeci">float * AngleRoll</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00065">Precharge.h:65</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_aa0d6bb3b938787ae1de06d67d1e3deaf"><div class="ttname"><a href="struct_pre_charge_task_data.html#aa0d6bb3b938787ae1de06d67d1e3deaf">PreChargeTaskData::RateCalibrationYaw</a></div><div class="ttdeci">float * RateCalibrationYaw</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00059">Precharge.h:59</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_aae4496a1b8d72f6107bdfcf81472741b"><div class="ttname"><a href="struct_pre_charge_task_data.html#aae4496a1b8d72f6107bdfcf81472741b">PreChargeTaskData::motorControllerBatteryVoltage</a></div><div class="ttdeci">float * motorControllerBatteryVoltage</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00050">Precharge.h:50</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_aaf5cdfb5b1dd1857d4082f3a014ffb51"><div class="ttname"><a href="struct_pre_charge_task_data.html#aaf5cdfb5b1dd1857d4082f3a014ffb51">PreChargeTaskData::RateYaw</a></div><div class="ttdeci">float * RateYaw</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00055">Precharge.h:55</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_ab12a4f264d6acfdf84ce67728ecb42b2"><div class="ttname"><a href="struct_pre_charge_task_data.html#ab12a4f264d6acfdf84ce67728ecb42b2">PreChargeTaskData::RateCalibrationNumber</a></div><div class="ttdeci">int * RateCalibrationNumber</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00061">Precharge.h:61</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_afc133d30f22f7a7f72ee498b3d69be82"><div class="ttname"><a href="struct_pre_charge_task_data.html#afc133d30f22f7a7f72ee498b3d69be82">PreChargeTaskData::RatePitch</a></div><div class="ttdeci">float * RatePitch</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00054">Precharge.h:54</a></div></div>
<div class="ttc" id="astruct_pre_charge_task_data_html_afdfc29c3040101593d7d298c7b432132"><div class="ttname"><a href="struct_pre_charge_task_data.html#afdfc29c3040101593d7d298c7b432132">PreChargeTaskData::cellVoltages</a></div><div class="ttdeci">CellVoltages cellVoltages</div><div class="ttdef"><b>Definition:</b> <a href="_precharge_8h_source.html#l00049">Precharge.h:49</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
